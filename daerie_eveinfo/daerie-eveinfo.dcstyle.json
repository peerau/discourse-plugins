{"theme":{"id":9,"name":"Daerie EVEInfo","created_at":"2018-11-01T12:25:39.956Z","updated_at":"2018-11-01T12:25:39.956Z","component":true,"color_scheme":null,"color_scheme_id":null,"user_selectable":false,"remote_theme_id":null,"user":{"id":1,"username":"warlof","name":"","avatar_template":"/user_avatar/forums.clandaerie.com/warlof/{size}/44_1.png","title":"Membre EVE Online"},"theme_fields":[{"name":"head_tag","target":"common","value":"\u003cscript type=\"text/x-handlebars\" data-template-name=\"modal/eve-info-modal\"\u003e\n{{#d-modal-body title=\"eve_info_modal_title\" class=\"eve-info-modal\"}}\n\u003cdiv class=\"media\"\u003e\n    \u003cdiv class=\"media-left\"\u003e\n        {{#if model.character_id }}\n        \u003cimg class=\"media-object avatar\" src=\"//image.eveonline.com/Character/{{ model.character_id }}_64.jpg\" alt=\"{{ model.name }}\"\u003e\n        {{/if}}\n        {{#if model.corporation_id }}\n        \u003cimg class=\"media-object avatar\" src=\"//image.eveonline.com/Corporation/{{ model.corporation_id }}_64.png\" alt=\"Corporation\"\u003e\n        {{/if}}\n        {{#if model.alliance_id }}\n        \u003cimg class=\"media-object avatar\" src=\"//image.eveonline.com/Alliance/{{ model.alliance_id }}_64.png\" alt=\"Alliance\"\u003e\n        {{/if}}\n    \u003c/div\u003e\n    \u003cdiv class=\"media-body\"\u003e{{{ model.description }}}\u003c/div\u003e\n\u003c/div\u003e\n{{/d-modal-body}}\n\u003cdiv class=\"modal-footer\"\u003e\n  \u003cdiv class=\"badge-section\"\u003e\n    {{#if model.is_character}}\n    \u003cspan\u003e\n        \u003ca href=\"//seat.clandaerie.com/character/view/sheet/{{ model.entity_id }}\" target=\"_blank\"\u003e\n            \u003cspan class=\"user-badge\"\u003e\n                \u003cimg src=\"//seat.clandaerie.com/web/img/favico/favicon-16x16.png\" alt=\"SeAT\" /\u003e\n                \u003cspan class=\"badge-display-name\"\u003eSeAT\u003c/span\u003e\n            \u003c/span\u003e\n        \u003c/a\u003e\n        \n    \u003c/span\u003e\n    \u003cspan\u003e\n        \u003ca href=\"//eveskillboard.com/pilot/{{ model.entity_alias }}\" target=\"_blank\"\u003e\n            \u003cspan class=\"user-badge\"\u003e\n                \u003cimg src=\"//eveskillboard.com/images/favicon.ico\" alt=\"EvE Skillboard\" /\u003e\n                \u003cspan class=\"badge-display-name\"\u003eSkillboard\u003c/span\u003e\n            \u003c/span\u003e\n        \u003c/a\u003e\n    \u003c/span\u003e\n    \u003cspan\u003e\n        \u003ca href=\"//forums.eveonline.com/u/{{ model.entity_alias }}/summary\" target=\"_blank\"\u003e\n            \u003cspan class=\"user-badge\"\u003e\n                \u003cimg src=\"//web.ccpgamescdn.com/forums/img/eve_favicon.ico\" alt=\"EvE Forum\" /\u003e\n                \u003cspan class=\"badge-display-name\"\u003eForum\u003c/span\u003e\n            \u003c/span\u003e\n        \u003c/a\u003e\n    \u003c/span\u003e\n    \u003cspan\u003e\n        \u003ca href=\"//eve-search.com/search/author/{{ model.name }}\" target=\"_blank\"\u003e\n            \u003cspan class=\"user-badge\"\u003e\n                \u003cimg src=\"//eve-search.com/favicon.ico\" alt=\"EvE Search\" /\u003e\n                \u003cspan class=\"badge-display-name\"\u003eEvE Search\u003c/span\u003e\n            \u003c/span\u003e\n        \u003c/a\u003e\n    \u003c/span\u003e\n    \u003cspan\u003e\n        \u003ca href=\"//evewho.com/pilot/{{ model.name }}\" target=\"_blank\"\u003e\n            \u003cspan class=\"user-badge\"\u003e\n                \u003cimg src=\"//evewho.com/favicon.ico\" alt=\"EvE Who\" /\u003e\n                \u003cspan class=\"badge-display-name\"\u003eEvE Who\u003c/span\u003e\n            \u003c/span\u003e\n        \u003c/a\u003e\n    \u003c/span\u003e\n    \u003cspan\u003e\n        \u003ca href=\"//zkillboard.com/character/{{ model.entity_id }}\" target=\"_blank\"\u003e\n            \u003cspan class=\"user-badge\"\u003e\n                \u003cimg src=\"//zkillboard.com/favicon.ico\" alt=\"zKillboard\" /\u003e\n                \u003cspan class=\"badge-display-name\"\u003ezKillboard\u003c/span\u003e\n            \u003c/span\u003e\n        \u003c/a\u003e\n    \u003c/span\u003e\n    \u003cspan\u003e\n        \u003ca href=\"http://eve-prism.com/?view=character\u0026name={{ model.name }}\" target=\"_blank\"\u003e\n            \u003cspan class=\"user-badge\"\u003e\n                \u003cimg src=\"//eve-prism.com/media/favicon.ico\" alt=\"EvE Prism\" /\u003e\n                \u003cspan class=\"badge-display-name\"\u003eEvE Prism\u003c/span\u003e\n            \u003c/span\u003e\n        \u003c/a\u003e\n    \u003c/span\u003e\n    {{/if}}\n    {{#if model.is_corporation }}\n    \u003cspan\u003e\n        \u003ca href=\"//seat.clandaerie.com/corporation/view/summary/{{ model.entity_id }}\" target=\"_blank\"\u003e\n            \u003cspan class=\"user-badge\"\u003e\n                \u003cimg src=\"//seat.clandaerie.com/web/img/favico/favicon-16x16.png\" alt=\"SeAT\" /\u003e\n                \u003cspan class=\"badge-display-name\"\u003eSeAT\u003c/span\u003e\n            \u003c/span\u003e\n        \u003c/a\u003e\n        \n    \u003c/span\u003e\n    \u003cspan\u003e\n        \u003ca href=\"//evewho.com/corp/{{ model.name }}\" target=\"_blank\"\u003e\n            \u003cspan class=\"user-badge\"\u003e\n                \u003cimg src=\"//evewho.com/favicon.ico\" alt=\"EvE Who\" /\u003e\n                \u003cspan class=\"badge-display-name\"\u003eEvE Who\u003c/span\u003e\n            \u003c/span\u003e\n        \u003c/a\u003e\n    \u003c/span\u003e\n    \u003cspan\u003e\n        \u003ca href=\"//zkillboard.com/corporation/{{ model.entity_id }}\" target=\"_blank\"\u003e\n            \u003cspan class=\"user-badge\"\u003e\n                \u003cimg src=\"//zkillboard.com/favicon.ico\" alt=\"zKillboard\" /\u003e\n                \u003cspan class=\"badge-display-name\"\u003ezKillboard\u003c/span\u003e\n            \u003c/span\u003e\n        \u003c/a\u003e\n    \u003c/span\u003e\n    \u003cspan\u003e\n        \u003ca href=\"http://eve-prism.com/?view=corporation\u0026name={{ model.name }}\" target=\"_blank\"\u003e\n            \u003cspan class=\"user-badge\"\u003e\n                \u003cimg src=\"//eve-prism.com/media/favicon.ico\" alt=\"EvE Prism\" /\u003e\n                \u003cspan class=\"badge-display-name\"\u003eEvE Prism\u003c/span\u003e\n            \u003c/span\u003e\n        \u003c/a\u003e\n    \u003c/span\u003e\n    {{/if}}\n    {{#if model.is_alliance }}\n    \u003cspan\u003e\n        \u003ca href=\"//evewho.com/alli/{{ model.name }}\" target=\"_blank\"\u003e\n            \u003cspan class=\"user-badge\"\u003e\n                \u003cimg src=\"//evewho.com/favicon.ico\" alt=\"EvE Who\" /\u003e\n                \u003cspan class=\"badge-display-name\"\u003eEvE Who\u003c/span\u003e\n            \u003c/span\u003e\n        \u003c/a\u003e\n    \u003c/span\u003e\n    \u003cspan\u003e\n        \u003ca href=\"//zkillboard.com/alliance/{{ model.entity_id }}\" target=\"_blank\"\u003e\n            \u003cspan class=\"user-badge\"\u003e\n                \u003cimg src=\"//zkillboard.com/favicon.ico\" alt=\"zKillboard\" /\u003e\n                \u003cspan class=\"badge-display-name\"\u003ezKillboard\u003c/span\u003e\n            \u003c/span\u003e\n        \u003c/a\u003e\n    \u003c/span\u003e\n    \u003cspan\u003e\n        \u003ca href=\"http://eve-prism.com/?view=alliance\u0026name={{ model.name }}\" target=\"_blank\"\u003e\n            \u003cspan class=\"user-badge\"\u003e\n                \u003cimg src=\"//eve-prism.com/media/favicon.ico\" alt=\"EvE Prism\" /\u003e\n                \u003cspan class=\"badge-display-name\"\u003eEvE Prism\u003c/span\u003e\n            \u003c/span\u003e\n        \u003c/a\u003e\n    \u003c/span\u003e\n    {{/if}}\n  \u003c/div\u003e\n\u003c/div\u003e\n\u003c/script\u003e\n\u003cscript type=\"text/discourse-plugin\" version=\"0.8.24\"\u003e\n    const ESI_BASE_URI = 'https://esi.evetech.net';\n    const showModal = require('discourse/lib/show-modal').default;\n    let currentLocale = I18n.currentLocale();\n    \n    api.decorateCooked(function (cooked) {\n        var infoNames = [];\n        cooked.find('a[href=\"#eveinfo\"]').each(function (index, entity) {\n            infoNames.push($(entity).text());\n        });\n        \n        cooked.find('a[href=\"#eveinfo\"]').on('click', function(){\n            var entity = {\n                type: $(this).attr('data-type'),\n                id: $(this).attr('data-id')\n            };\n            \n            if (['alliances', 'corporations', 'characters'].indexOf(entity.type) \u003e= 0) {\n                $.ajax({\n                    headers: {\n                        'X-User-Agent': 'discourse/1.0.0 (Warlof Tutsimo - Daerie Inc. - Get Off My Lawn)'\n                    },\n                    type: 'GET',\n                    url: ESI_BASE_URI + '/latest/' + entity.type + '/' + entity.id + '/',\n                    dataType: 'json'\n                }).done(function(data){\n                    I18n.translations[currentLocale].js.eve_info_modal_title = data.name;\n                    data.entity_type  = entity.type;\n                    data.entity_id    = entity.id;\n                    data.entity_alias = data.name.replace(' ', '_');\n                    data.description  = (data.description ? data.description : '').replace(/\u003c\\/?font(?:.|\\n)*?\u003e/gmi, '')\n                        .replace(/\u003ca href=showinfo:([0-9]+)\u003e([éèàçù \\w]+)\u003c\\/a\u003e/gmi, function(match, p1, p2, offset, string) {\n                            return p2;\n                        });\n                        \n                    switch(entity.type) {\n                        case 'characters':\n                            data.is_character = true;\n                            data.character_id = entity.id;\n                            break;\n                        case 'corporations':\n                            data.is_corporation = true;\n                            data.corporation_id = entity.id;\n                            break;\n                        case 'alliances':\n                            data.is_alliance = true;\n                            data.alliance_id = entity.id;\n                            break;\n                    }\n                    \n                    showModal('eveInfoModal', {\n                        'model': data\n                    });\n                });\n            }\n        });\n        \n        console.debug(infoNames);\n        \n        $.ajax({\n            headers: {\n                'X-User-Agent': 'discourse/1.0.0 (Warlof Tutsimo - Daerie Inc. - Get Off My Lawn)'\n            },\n            type: 'POST',\n            url: ESI_BASE_URI + '/latest/universe/ids/',\n            data: JSON.stringify(infoNames),\n            dataType: 'json',\n            contentType: 'application/json; charset=utf-8'\n        }).done(function (data) {\n            for (var type in data) {\n                $(data[type]).each(function(index, entity) {\n                    cooked.find('a[href=\"#eveinfo\"]:contains(' + entity.name + ')')\n                        .attr('data-type', type)\n                        .attr('data-id', entity.id);\n                });\n            }\n        });\n    }, {onlyStream: true})\n\u003c/script\u003e","type_id":0},{"name":"scss","target":"common","value":".eve-info-modal p {\n    text-align: justify;\n}\n\n.media .media-left, .media .media-right, .media .media-body {\n    display: table-cell;\n    vertical-align: top;\n}\n\n.media .media-object {\n    display: block;\n    width: 64px;\n    height: 64px;\n    margin-bottom: 15px;\n}\n\n.media .media-body {\n    padding-left: 10px;\n}\n","type_id":1}],"remote_theme":null}}
